(this["webpackJsonp2.6-2.10"]=this["webpackJsonp2.6-2.10"]||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),r=t.n(c),a=t(3),s=t(2),u=t(0),o=function(e){return Object(u.jsxs)("div",{children:["Search by name or phone number:",Object(u.jsx)("input",{value:e.newFilter,onChange:e.handleFilterChange})]})},i=function(e){return Object(u.jsxs)("form",{onSubmit:e.addPerson,children:[Object(u.jsx)("div",{children:Object(u.jsx)("input",{value:e.newName,onChange:e.handleNameChange,placeholder:"Add a new person",onClick:function(){e.setNewName("")}})}),Object(u.jsx)("div",{children:Object(u.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange,placeholder:"Add a phone number",onClick:function(){e.setNewNumber("")}})}),Object(u.jsx)("button",{type:"submit",children:"Add"})]})},l=function(e){var n=e.persons;""!==e.newFilter&&(n=isNaN(e.newFilter)?e.persons.filter((function(n){return n.name.toLowerCase().includes(e.newFilter.toLowerCase())})):e.persons.filter((function(n){return n.number.includes(e.newFilter)})));return Object(u.jsxs)("ul",{children:[" ",n.map((function(n){return Object(u.jsxs)("li",{className:"person",children:[n.name," ",n.number," ",Object(u.jsx)("button",{onClick:function(){return e.deletePerson(n)},children:" Delete "})]},n.id)}))," "]})},d=t(4),m=t.n(d),f="/api/persons",b={getAll:function(){return m.a.get(f).then((function(e){return e.data}))},create:function(e){return m.a.post(f,e).then((function(e){return e.data}))},remove:function(e){return m.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},update:function(e,n){return m.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))}},h=function(e){var n=e.notification;return null===n.message?null:"success"===n.type?Object(u.jsx)("div",{className:"success",children:n.message}):Object(u.jsx)("div",{className:"error",children:n.message})},j=function(){var e=Object(s.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],r=Object(s.useState)(""),d=Object(a.a)(r,2),m=d[0],f=d[1],j=Object(s.useState)(""),p=Object(a.a)(j,2),g=p[0],O=p[1],v=Object(s.useState)(""),w=Object(a.a)(v,2),y=w[0],x=w[1],N={message:null,type:null},C=Object(s.useState)(N),F=Object(a.a)(C,2),k=F[0],A=F[1];Object(s.useEffect)((function(){b.getAll().then((function(e){c(e)}))}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Phonebook"}),Object(u.jsx)(h,{notification:k}),Object(u.jsx)(o,{newFilter:y,handleFilterChange:function(e){x(e.target.value)}}),Object(u.jsx)("h2",{children:" Add a new person "}),Object(u.jsx)(i,{addPerson:function(e){if(e.preventDefault(),t.some((function(e){return e.name===m}))){if(window.confirm("".concat(m," is already added to phonebook, replace the old number with a new one?"))){var n=t.find((function(e){return e.name===m})).id,r={name:m,number:g};console.log(n,r),b.update(n,r).then((function(e){c(t.map((function(n){return n.id===e.id?e:n}))),N={message:"Updated ".concat(m," phone number"),type:"success"},A(N),f(""),O(""),setTimeout((function(){A({message:null,type:null})}),5e3)})).catch((function(e){N={message:"".concat(m," has already been removed from server"),type:"error"},A(N),setTimeout((function(){A({message:null,type:null})}),5e3)}))}}else if(t.some((function(e){return e.number===g})))N={message:"Phone number ".concat(g," is already in use!"),type:"success"},A(N),O(""),setTimeout((function(){A({name:null,type:null})}),5e3);else{var a={name:m,number:g};b.create(a).then((function(e){c(t.concat(e)),N={message:"Added ".concat(m),type:"success"},A(N),f(""),O(""),setTimeout((function(){A({message:null,type:null})}),5e3)})).catch((function(e){N={message:e.response.data.error,type:"error"},A(N),f(""),O(""),setTimeout((function(){A({message:null,type:null})}),5e3)}))}},newName:m,setNewName:f,handleNameChange:function(e){f(e.target.value)},newNumber:g,setNewNumber:O,handleNumberChange:function(e){O(e.target.value)}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(l,{persons:t,newFilter:y,deletePerson:function(e){var n=e.id;window.confirm("Delete ".concat(e.name,"?"))&&(console.log("Poistetaan henkil\xf6 ".concat(e.name)),b.remove(n).then((function(r){var a=t.filter((function(e){return e.id!==n}));c(a),N={message:"Deleted ".concat(e.name),type:"success"},A(N),setTimeout((function(){A({message:null,type:null})}),5e3)})).catch((function(n){N={message:"".concat(e.name," has already been removed from server"),type:"error"},A(N),setTimeout((function(){A({message:null,type:null})}),5e3)})))}})]})};t(38);r.a.render(Object(u.jsx)(j,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.520f321c.chunk.js.map